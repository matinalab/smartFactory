# æ™ºæ…§å·¥å‚ç›‘æ§ç³»ç»Ÿ - å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸ“‹ å¯åŠ¨å‰æ£€æŸ¥æ¸…å•

- [ ] Node.js >= 16.x å·²å®‰è£…
- [ ] MySQL >= 5.7 å·²å®‰è£…å¹¶è¿è¡Œ
- [ ] MySQL æ•°æ®åº“å·²åˆ›å»º (`smartfactory_db`)
- [ ] åç«¯ç¯å¢ƒå˜é‡å·²é…ç½® (`.env` æ–‡ä»¶)

---

## ğŸš€ å®Œæ•´å¯åŠ¨æµç¨‹

### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡æ•°æ®åº“

1. **å¯åŠ¨ MySQL æœåŠ¡**
   ```bash
   # Windows (ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ)
   net start MySQL
   
   # Linux/Mac
   sudo systemctl start mysql
   ```

2. **åˆ›å»ºæ•°æ®åº“**
   ```sql
   -- ç™»å½• MySQL
   mysql -u root -p
   
   -- åˆ›å»ºæ•°æ®åº“
   CREATE DATABASE smartfactory_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   
   -- éªŒè¯
   SHOW DATABASES;
   
   -- é€€å‡º
   exit;
   ```

### ç¬¬äºŒæ­¥ï¼šé…ç½®å¹¶å¯åŠ¨åç«¯

1. **è¿›å…¥åç«¯ç›®å½•**
   ```bash
   cd D:\work\smartFactory\backend
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   # å¤åˆ¶é…ç½®æ¨¡æ¿
   copy .env.example .env
   
   # ä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€ .env æ–‡ä»¶å¹¶ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š
   ```
   
   ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š
   ```env
   # æ•°æ®åº“é…ç½®
   DB_HOST=localhost
   DB_PORT=3306
   DB_USERNAME=root
   DB_PASSWORD=ä½ çš„MySQLå¯†ç         # ä¿®æ”¹è¿™é‡Œï¼
   DB_DATABASE=smartfactory_db
   
   # æœåŠ¡ç«¯å£
   PORT=3000
   
   # è·¨åŸŸé…ç½®
   CORS_ORIGIN=http://localhost:8080
   ```

4. **åˆå§‹åŒ–æ•°æ®ï¼ˆé¦–æ¬¡è¿è¡Œå¿…é¡»æ‰§è¡Œï¼‰**
   ```bash
   npm run seed
   ```
   
   æˆåŠŸè¾“å‡ºç¤ºä¾‹ï¼š
   ```
   ğŸŒ± å¼€å§‹æ’­ç§æ•°æ®...
   âœ… å·¥å‚æ•°æ®æ’­ç§å®Œæˆï¼
   ```

5. **å¯åŠ¨åç«¯æœåŠ¡**
   ```bash
   npm run start:dev
   ```
   
   æˆåŠŸè¾“å‡ºç¤ºä¾‹ï¼š
   ```
   ğŸš€ æœåŠ¡å·²å¯åŠ¨:
      - åœ°å€: http://localhost:3000
      - API: http://localhost:3000/api
      - æ•°æ®åº“: localhost:3306/smartfactory_db
   ```

### ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨å‰ç«¯

1. **æ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œè¿›å…¥å‰ç«¯ç›®å½•**
   ```bash
   cd D:\work\smartFactory\frontend
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```
   
   æˆåŠŸè¾“å‡ºç¤ºä¾‹ï¼š
   ```
   VITE v5.3.4  ready in 1234 ms
   
   âœ  Local:   http://localhost:8080/
   âœ  Network: http://192.168.x.x:8080/
   ```

4. **è®¿é—®ç³»ç»Ÿ**
   
   åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š`http://localhost:8080`

---

## âœ… éªŒè¯ç³»ç»Ÿè¿è¡Œ

### 1. æ£€æŸ¥åç«¯API

è®¿é—®ï¼š`http://localhost:3000/api`

åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
```json
{
  "message": "Welcome to SmartFactory API",
  "version": "1.0.0"
}
```

### 2. æ£€æŸ¥æ•°æ®åº“æ•°æ®

```sql
-- ç™»å½• MySQL
mysql -u root -p smartfactory_db

-- æŸ¥çœ‹æ•°æ®è¡¨
SHOW TABLES;

-- æŸ¥çœ‹è®¾å¤‡æ•°æ®
SELECT * FROM device LIMIT 5;

-- æŸ¥çœ‹åŒºåŸŸæ•°æ®
SELECT * FROM area;

-- é€€å‡º
exit;
```

### 3. æ£€æŸ¥å‰ç«¯ç•Œé¢

æ‰“å¼€ `http://localhost:8080`ï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

- âœ… æ™ºæ…§å·¥å‚ç›‘æ§ä¸­å¿ƒæ ‡é¢˜
- âœ… å·¦ä¾§ç»Ÿè®¡å¡ç‰‡ï¼ˆè®¾å¤‡çŠ¶æ€ã€è¿è¡Œä¸­ã€æ•…éšœã€æ•ˆç‡ï¼‰
- âœ… ä¸­é—´å·¥å‚å¹³é¢å›¾
- âœ… å³ä¾§è®¾å¤‡è¯¦æƒ…é¢æ¿
- âœ… å®æ—¶å‘Šè­¦åˆ—è¡¨

---

## ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: åç«¯å¯åŠ¨å¤±è´¥ - æ•°æ®åº“è¿æ¥é”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Error: connect ECONNREFUSED 127.0.0.1:3306
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤ MySQL æœåŠ¡å·²å¯åŠ¨
2. æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®
3. éªŒè¯æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç 

### é—®é¢˜2: å‰ç«¯å¯åŠ¨å¤±è´¥ - ç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Port 8080 is already in use
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä¿®æ”¹ `frontend/vite.config.js` ä¸­çš„ç«¯å£å·
2. æˆ–è€…å…³é—­å ç”¨ 8080 ç«¯å£çš„ç¨‹åº

### é—®é¢˜3: å‰ç«¯é¡µé¢ç©ºç™½ - APIè¯·æ±‚å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤åç«¯æœåŠ¡å·²å¯åŠ¨ï¼ˆ`http://localhost:3000`ï¼‰
2. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· -> Network æŸ¥çœ‹è¯·æ±‚
3. æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰ CORS é”™è¯¯
4. ç¡®è®¤ `vite.config.js` ä¸­çš„ä»£ç†é…ç½®æ­£ç¡®

### é—®é¢˜4: npm install å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ¸…é™¤ç¼“å­˜
npm cache clean --force

# åˆ é™¤ node_modules
rm -rf node_modules
rm package-lock.json

# é‡æ–°å®‰è£…
npm install
```

### é—®é¢˜5: TypeScript ç¼–è¯‘é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# åç«¯ç›®å½•
cd backend
npm run build

# å¦‚æœæœ‰é”™è¯¯ï¼Œæ£€æŸ¥ TypeScript ç‰ˆæœ¬
npm list typescript
```

---

## ğŸ“ å¼€å‘æ¨¡å¼

### å‰ç«¯çƒ­æ›´æ–°

å‰ç«¯ä½¿ç”¨ Viteï¼Œä¿®æ”¹ä»£ç åä¼šè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ï¼Œæ— éœ€æ‰‹åŠ¨é‡å¯ã€‚

### åç«¯çƒ­æ›´æ–°

åç«¯ä½¿ç”¨ nodemonï¼Œä¿®æ”¹ `.ts` æ–‡ä»¶åä¼šè‡ªåŠ¨é‡å¯æœåŠ¡ã€‚

### åŒæ—¶æŸ¥çœ‹æ—¥å¿—

**Windows PowerShell**ï¼š
```powershell
# å‰ç«¯å’Œåç«¯åˆ†åˆ«åœ¨ä¸åŒçš„ç»ˆç«¯çª—å£è¿è¡Œ
```

**ä½¿ç”¨ VS Code**ï¼š
1. æ‰“å¼€é›†æˆç»ˆç«¯ï¼ˆCtrl + `ï¼‰
2. ç‚¹å‡» "+" åˆ›å»ºæ–°ç»ˆç«¯
3. ä¸€ä¸ªç»ˆç«¯è¿è¡Œå‰ç«¯ï¼Œå¦ä¸€ä¸ªè¿è¡Œåç«¯

---

## ğŸ›‘ åœæ­¢æœåŠ¡

### åœæ­¢å‰ç«¯
åœ¨å‰ç«¯ç»ˆç«¯æŒ‰ `Ctrl + C`

### åœæ­¢åç«¯
åœ¨åç«¯ç»ˆç«¯æŒ‰ `Ctrl + C`

### åœæ­¢ MySQLï¼ˆå¯é€‰ï¼‰
```bash
# Windows
net stop MySQL

# Linux/Mac
sudo systemctl stop mysql
```

---

## ğŸ“¦ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### æ„å»ºå‰ç«¯
```bash
cd frontend
npm run build
# äº§ç‰©åœ¨ dist/ ç›®å½•
```

### æ„å»ºåç«¯
```bash
cd backend
npm run build
# äº§ç‰©åœ¨ dist/ ç›®å½•
```

### ä½¿ç”¨ PM2 éƒ¨ç½²åç«¯
```bash
npm install -g pm2
cd backend
pm2 start dist/main.js --name smartfactory-api
pm2 save
pm2 startup
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥

- ğŸ“– é˜…è¯» [README.md](./README.md) äº†è§£å®Œæ•´åŠŸèƒ½
- ğŸ”Œ æŸ¥çœ‹ API æ–‡æ¡£äº†è§£æ¥å£è¯¦æƒ…
- ğŸ¨ è‡ªå®šä¹‰æ ·å¼å’Œä¸»é¢˜
- ğŸ”§ æ·»åŠ æ–°çš„è®¾å¤‡ç±»å‹
- ğŸ“Š æ‰©å±•æ•°æ®ç»Ÿè®¡åŠŸèƒ½

---

**éœ€è¦å¸®åŠ©ï¼Ÿ**

- æŸ¥çœ‹ README.md
- æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—
- æäº¤ Issue